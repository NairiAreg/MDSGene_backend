# Документация по улучшению кода

В этом документе описаны улучшения, внесённые в кодовую базу для ... потенциальных проблем и повышения общего качества системы.

## 1. Согласованность форматирования ответов в VectorStoreProcessor

### Проблема
Метод `format_answer` класса `VectorStoreProcessor` не выполнял форматирование на основе заданной стратегии, в отличие от `GeminiProcessor`, который форматирует ответы явно.

### Улучшения
- Расширен метод `format_answer` в `VectorStoreProcessor` для выполнения базовых проверок форматирования, аналогичных `GeminiProcessor`.
- Добавлена обработка `null`/пустых значений и распространённых фраз, указывающих на отсутствие информации.
- Реализована базовая логика форматирования на основе подсказок стратегии (числовые значения, да/нет, пол).
- Улучшено логирование для обеспечения лучшей видимости процесса форматирования.

### Преимущества
...
Эти параметры можно задать в файле `.env` в корне проекта или как системные переменные окружения.

### Поведение при ошибках

Теперь система будет пытаться повторять неудачные запросы к сервису векторного хранилища ... Это обеспечивает большую устойчивость к временным сбоям сервиса.

Если вы видите сообщения об использовании запасных механизмов, проверьте, что сервис векторного хранилища работает корректно.

## Рекомендации на будущее

1. **Отказаться от прямой загрузки FAISS**: со временем рассмотреть возможность удаления прямого использования для снижения сложности и потенциальных проблем синхронизации.

2. **Стандартизировать логирование**: реализовать единообразную систему логирования с чёткими уровнями (INFO, WARNING, ERROR) и структурированными записями.

3. **Добавить мониторинг**: рассмотреть добавление мониторинга и уведомлений для ситуаций использования запасных механизмов, чтобы проактивно реагировать на проблемы сервиса.
